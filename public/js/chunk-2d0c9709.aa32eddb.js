(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c9709"],{"58c3":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pa-6"},[t.selectedAccount?a("v-row",{staticClass:"mb-2"},[a("v-col",{attrs:{cols:"12",md:"4",sm:"12"}},[a("v-card",[a("v-card-title",{staticClass:"justify-center pb-2 text-h4"},[a("span",{staticClass:"primary--text text-h3 pr-2"},[t._v("₱")]),t._v(" "+t._s(t.money(t.encashments.meta?t.encashments.meta.available_commission:0))+" ")]),a("v-card-text",{staticClass:"text-center text-button"},[t._v(" Available Commission ")])],1)],1),a("v-col",{attrs:{cols:"12",md:"4",sm:"12"}},[a("v-card",[a("v-card-title",{staticClass:"justify-center pb-2 text-h4"},[t._v(" "+t._s(t.tax)),a("span",{staticClass:"primary--text text-h3 pl-2"},[t._v("%")])]),a("v-card-text",{staticClass:"text-center text-button"},[t._v(" Tax ")])],1)],1),a("v-col",{attrs:{cols:"12",md:"4",sm:"12"}},[a("v-card",[a("v-card-title",{staticClass:"justify-center pb-2 text-h4"},[a("span",{staticClass:"primary--text text-h3 pr-2"},[t._v("₱")]),t._v(" "+t._s(t.money(t.adminFee))+" ")]),a("v-card-text",{staticClass:"text-center text-button"},[t._v(" Admin Fee ")])],1)],1)],1):t._e(),a("v-data-table",{staticClass:"elevation-1 overflow-hidden",attrs:{loading:t.loading,headers:t.headers,items:t.encashments.data,options:t.pagination,"footer-props":{itemsPerPageOptions:t.itemsPerPageOptions},"server-items-length":t.encashments.meta?t.encashments.meta.total:0,dark:""},on:{"update:options":function(e){t.pagination=e}},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-container",{staticClass:"grey darken-4 elevation-1 pt-6 px-7",staticStyle:{"max-width":"100%!important"}},[a("v-row",[a("v-col",{staticClass:"primary--text headline",attrs:{cols:"12",md:"4",sm:"12"}},[a("v-btn",{staticClass:"mr-3 elevation-0",attrs:{"x-small":"",fab:"",color:"primary"},on:{click:function(e){return t.reloadEncashments()}}},[a("v-icon",{staticClass:"black--text",attrs:{small:""}},[t._v("fas fa-redo-alt")])],1),a("small",[t._v("Encashments")])],1),a("v-col",{staticClass:"py-2",attrs:{cols:"12",md:"4",sm:"12"}},[a("v-select",{attrs:{disabled:t.loading,"prepend-inner-icon":"fas fa-money-check",items:[{text:"Paid",value:1},{text:"Pending",value:0}],label:"Status",clearable:"",dense:"",dark:"",outlined:""},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}})],1),a("v-col",{staticClass:"py-2",attrs:{cols:"12",md:"4",sm:"12"}},[a("v-btn",{staticClass:"elevation-1 black--text",attrs:{color:"primary",block:"",disabled:!t.encashments.meta||t.encashments.meta&&t.encashments.meta.available_commission<t.minimumEncashment},on:{click:function(e){t.addEncashmentDialog=!0}}},[a("v-icon",{staticClass:"mr-2",attrs:{small:""}},[t._v("fas fa-plus")]),t._v(" Request Encashment ")],1)],1)],1)],1)]},proxy:!0},{key:"item.created_at",fn:function(e){var a=e.item;return[t._v(" "+t._s(t.date(a.created_at,"MMMM D, YYYY - hh:mm a"))+" ")]}},{key:"item.amount",fn:function(e){var s=e.item;return[a("span",{staticClass:"primary--text text-button",staticStyle:{"font-size":"18px!important"}},[t._v("₱")]),t._v(" "+t._s(t.money(s.amount))+" ")]}},{key:"item.status",fn:function(e){var s=e.item;return[a("div",{staticClass:"justify-center layout"},[a("v-chip",{class:s.confirmed?"success":"primary black--text",attrs:{small:"",dark:""}},[t._v(" "+t._s(s.confirmed?"Paid":"Pending")+" ")])],1)]}},{key:"item.actions",fn:function(e){var s=e.item;return[a("div",{staticClass:"justify-center layout"},[a("v-btn",{staticClass:"elevation-0 ml-2 blue",attrs:{dark:"",fab:"","x-small":""},on:{click:function(e){t.selectedEncashment=s,t.showEncashmentDialog=!0}}},[a("v-icon",{attrs:{dark:"",small:""}},[t._v("fas fa-search")])],1)],1)]}}])}),a("v-dialog",{attrs:{persistent:"","max-width":"500px","overlay-opacity":"0.6","overlay-color":"grey"},model:{value:t.showEncashmentDialog,callback:function(e){t.showEncashmentDialog=e},expression:"showEncashmentDialog"}},[a("v-card",{attrs:{dark:""}},[a("v-card-title",{staticClass:"pb-8"},[a("v-icon",{staticClass:"mr-2",attrs:{color:"primary"}},[t._v("fas fa-money-check")]),a("span",{staticClass:"headline primary--text"},[a("small",[t._v("Encashment Request Information")])]),a("v-spacer"),a("v-btn",{attrs:{disabled:t.submitting,fab:"",text:"",small:"",color:"primary"},on:{click:function(e){t.showEncashmentDialog=!1}}},[a("v-icon",[t._v("fas fa-times")])],1)],1),a("v-card-text",[a("v-card",{staticClass:"px-0 elevation-0"},[t.selectedEncashment.account&&t.selectedEncashment.account?a("v-card-text",[a("table",{staticClass:"w-full"},[a("tr",[a("td",{staticClass:"py-1"},[t._v("Account")]),a("td",{staticClass:"py-1 white--text"},[t._v(t._s(t.selectedEncashment.account.name))])]),a("tr",[a("td",{staticClass:"py-1"},[t._v("Payment Channel")]),a("td",{staticClass:"py-1 white--text"},[t._v(t._s(t.selectedEncashment.meta.payment_channel))])]),t.selectedEncashment.bank_account?a("tr",[a("td",{staticClass:"py-1"},[t._v("Bank Account")]),a("td",{staticClass:"py-1 primary--text"},[t._v(t._s(t.selectedEncashment.bank_account))])]):t._e(),a("tr",[a("td",{staticClass:"py-1"},[t._v("Mobile Number")]),a("td",{staticClass:"py-1 white--text"},[t._v(t._s(t.selectedEncashment.mobile_no))])]),a("tr",[a("td",{staticClass:"py-1"},[t._v("Amount")]),a("td",{staticClass:"py-1 white--text"},[a("span",{staticClass:"primary--text text-button",staticStyle:{"font-size":"18px!important"}},[t._v("₱")]),t._v(" "+t._s(t.selectedEncashment.amount)+" ")])]),a("tr",[a("td",{staticClass:"py-1"},[t._v("Tax")]),a("td",{staticClass:"py-1 white--text"},[a("span",{staticClass:"red--text text-button",staticStyle:{"font-size":"18px!important"}},[t._v("₱")]),t._v(" "+t._s(t.selectedEncashment.meta.tax_fee)+" ")])]),a("tr",[a("td",{staticClass:"py-1"},[t._v("Admin Fee")]),a("td",{staticClass:"py-1 white--text"},[a("span",{staticClass:"red--text text-button",staticStyle:{"font-size":"18px!important"}},[t._v("₱")]),t._v(" "+t._s(t.selectedEncashment.meta.admin_fee)+" ")])]),a("tr",[a("td",{staticClass:"py-1"},[t._v("Net Amount")]),a("td",{staticClass:"py-1 white--text"},[a("span",{staticClass:"primary--text text-button",staticStyle:{"font-size":"18px!important"}},[t._v("₱")]),t._v(" "+t._s(t.selectedEncashment.meta.net_amount)+" ")])]),a("tr",[a("td",{staticClass:"py-1"},[t._v("Date Requested")]),a("td",{staticClass:"py-1 white--text"},[t._v(" "+t._s(t.date(t.selectedEncashment.created_at,"MMMM D, YYYY - hh:mm a"))+" ")])])])]):t._e()],1)],1),a("v-card-actions",{staticClass:"pt-0"},[a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:"",disabled:t.submitting},on:{click:function(e){t.showEncashmentDialog=!1}}},[a("b",[t._v("Close")])])],1)],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"500px","overlay-opacity":"0.6","overlay-color":"grey"},model:{value:t.addEncashmentDialog,callback:function(e){t.addEncashmentDialog=e},expression:"addEncashmentDialog"}},[a("v-form",{ref:"addEncashmentForm",attrs:{lazy:""},on:{submit:function(e){return e.preventDefault(),t.addEncashment(e)}}},[a("v-card",{attrs:{dark:""}},[a("v-card-title",{staticClass:"pb-8"},[a("v-icon",{staticClass:"mr-2",attrs:{color:"primary"}},[t._v("fas fa-money-check")]),a("span",{staticClass:"headline primary--text"},[a("small",[t._v("Request Encashment")])]),a("v-spacer"),a("v-btn",{attrs:{disabled:t.submitting,fab:"",text:"",small:"",color:"primary"},on:{click:function(e){return t.closeAddDialog()}}},[a("v-icon",[t._v("fas fa-times")])],1)],1),a("v-card-text",[a("v-row",[a("v-col",{staticClass:"py-1",attrs:{cols:"12"}},[a("v-text-field",{attrs:{rules:[function(t){return!!t||"The amount is required."},function(e){return e>=t.minimumEncashment||"The minimum encashment is "+t.minimumEncashment},function(e){return parseFloat(e)<=t.encashments.meta.available_commission||"Not enough balance."}],type:"number",label:"Amount",outlined:"",flat:"",dense:"","prepend-inner-icon":"fas fa-money-check"},model:{value:t.addEncashmentForm.amount,callback:function(e){t.$set(t.addEncashmentForm,"amount",e)},expression:"addEncashmentForm.amount"}})],1),a("v-col",{staticClass:"py-1",attrs:{cols:"6"}},[a("v-text-field",{attrs:{value:t.totalTax,readonly:"",label:"Tax",outlined:"",flat:"",dense:"","prepend-inner-icon":"fas fa-money-check"}})],1),a("v-col",{staticClass:"py-1",attrs:{cols:"6"}},[a("v-text-field",{attrs:{value:t.adminFee,readonly:"",label:"Admin Fee",outlined:"",flat:"",dense:"","prepend-inner-icon":"fas fa-money-check"}})],1),a("v-col",{staticClass:"py-1",attrs:{cols:"6"}},[a("v-text-field",{attrs:{value:t.totalTax+t.adminFee,readonly:"",label:"Total Fee",outlined:"",flat:"",dense:"","prepend-inner-icon":"fas fa-money-check"}})],1),a("v-col",{staticClass:"py-1",attrs:{cols:"6"}},[a("v-text-field",{attrs:{value:t.addEncashmentForm.amount?t.addEncashmentForm.amount-(t.totalTax+t.adminFee):0,readonly:"",label:"Net Amount",outlined:"",flat:"",dense:"","prepend-inner-icon":"fas fa-money-check"}})],1),a("v-col",{staticClass:"py-1",attrs:{cols:"12"}},[a("v-select",{attrs:{"prepend-inner-icon":"fas fa-money-check",rules:[function(t){return!!t||"Payment channel type is required."}],items:["Bank","Padala Center"],label:"Payment Channel Type",dense:"",dark:"",outlined:""},model:{value:t.addEncashmentForm.payment_channel_type,callback:function(e){t.$set(t.addEncashmentForm,"payment_channel_type",e)},expression:"addEncashmentForm.payment_channel_type"}})],1),t.addEncashmentForm.payment_channel_type?a("v-col",{staticClass:"py-1",attrs:{cols:"12"}},[a("v-select",{attrs:{items:t.paymentChannels,rules:[function(t){return!!t||"Payment channel is required."}],"prepend-inner-icon":"fas fa-money-check",label:t.payment_channel_type,dense:"",dark:"",outlined:""},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("table",{staticClass:"w-full py-2"},[a("tr",[a("td",[a("img",{staticClass:"rounded",attrs:{src:e.item.img,width:"80px"}})]),a("td",{staticClass:"text-right"},[t._v(t._s(e.item.text))])])])]}},{key:"item",fn:function(e){return[a("table",{staticClass:"w-full py-2"},[a("tr",[a("td",[a("img",{staticClass:"rounded",attrs:{src:e.item.img,width:"80px"}})]),a("td",{staticClass:"text-right"},[t._v(t._s(e.item.text))])])])]}}],null,!1,1839909180),model:{value:t.addEncashmentForm.payment_channel,callback:function(e){t.$set(t.addEncashmentForm,"payment_channel",e)},expression:"addEncashmentForm.payment_channel"}})],1):t._e()],1)],1),a("v-card-actions",{staticClass:"pt-0"},[a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:"",disabled:t.submitting},on:{click:function(e){return t.closeAddDialog()}}},[a("b",[t._v("Close")])]),a("v-btn",{attrs:{color:"primary",text:"",loading:t.submitting,disabled:t.submitting,type:"submit"}},[a("b",[t._v("Save")])])],1)],1)],1)],1)],1)},n=[],c=(a("96cf"),a("1da1")),i=a("5530"),r=a("2f62"),l={data:function(){return{addEncashmentDialog:!1,showEncashmentDialog:!1,addEncashmentForm:{},loading:!0,submitting:!1,pagination:{page:1,itemsPerPage:10},selectedEncashment:{},errors:{},status:0,search:null,headers:[{text:"Account",align:"start",sortable:!1,value:"account.name"},{text:"Date Requested",align:"start",value:"created_at"},{text:"Amount",align:"start",sortable:!0,value:"amount"},{text:"Status",align:"center",sortable:!1,value:"status",width:"120px"},{text:"Actions",align:"center",sortable:!1,value:"actions",width:"120px"}],encashments:{},disablePagination:!1}},mounted:function(){this.getEncashments()},computed:Object(i["a"])(Object(i["a"])({},Object(r["b"])({itemsPerPageOptions:"itemsPerPageOptions",selectedAccount:"selectedAccount",tax:"tax",adminFee:"adminFee",minimumEncashment:"minimumEncashment"})),{},{totalTax:function(){var t=0;return this.addEncashmentForm.amount&&(t=this.addEncashmentForm.amount*(this.tax/100)),t},paymentChannels:function(){switch(this.addEncashmentForm.payment_channel_type){case"Bank":return[{text:"BDO",img:"/banks/bdo.png"},{text:"Eastwest",img:"/banks/eastwest.png"},{text:"Security Bank",img:"/banks/security_bank.jpg"}];case"Padala Center":return[{text:"Palawan Pawnshop",img:"/payment_centers/palawan.jpg"},{text:"M Lhuillier",img:"/payment_centers/ml.jpg"},{text:"Cebuana Lhuillier",img:"/payment_centers/cebuana.jpg"}];default:return[]}}}),watch:{status:function(){this.reloadEncashments()},pagination:{handler:function(){this.disablePagination||this.getEncashments()},deep:!0},selectedAccount:function(){this.reloadEncashments()}},methods:{closeAddDialog:function(){this.addEncashmentForm={},this.$refs.addEncashmentForm.resetValidation(),this.addEncashmentDialog=!1},reloadEncashments:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.disablePagination=!0,t.pagination.page=1,e.next=4,t.getEncashments();case 4:t.disablePagination=!1;case 5:case"end":return e.stop()}}),e)})))()},getEncashments:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,a=t.pagination,s={page:a.page,limit:a.itemsPerPage,meta_type:"Encashment",account_id:t.selectedAccount?t.selectedAccount.id:null,confirmed:t.status,user_id:t.userId},a.sortBy&&a.sortBy.length>0&&(t.$set(s,"order_by",a.sortBy[0]),t.$set(s,"order_desc",a.sortDesc[0]?1:0)),e.next=7,t.$axios.get("/user/transactions",{params:s});case 7:n=e.sent,t.encashments=n.data,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),t.showSnackbar("error",e.t0.response?e.t0.response.data.message:e.t0.message);case 14:return e.prev=14,t.loading=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,11,14,17]])})))()},addEncashment:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.$refs.addEncashmentForm.validate()){e.next=19;break}return e.prev=1,t.submitting=!0,t.addEncashmentForm.account_id=t.selectedAccount.id,e.next=6,t.$axios.post("/user/transactions/encashment",t.addEncashmentForm);case 6:t.$refs.addEncashmentForm.resetValidation(),t.addEncashmentForm={},t.getEncashments(),t.addEncashmentDialog=!1,t.showSnackbar("success","Encashment request has been submitted successfully."),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](1),t.showSnackbar("error",e.t0.response?e.t0.response.data.message:e.t0.message);case 16:return e.prev=16,t.submitting=!1,e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})))()}}},o=l,m=a("2877"),d=a("6544"),u=a.n(d),p=a("8336"),h=a("b0af"),v=a("99d9"),f=a("cc20"),y=a("62ad"),x=a("a523"),b=a("8fea"),_=a("169a"),g=a("4bd4"),C=a("132d"),E=a("0fd9"),k=a("b974"),w=a("2fa4"),F=a("8654"),P=Object(m["a"])(o,s,n,!1,null,null,null);e["default"]=P.exports;u()(P,{VBtn:p["a"],VCard:h["a"],VCardActions:v["a"],VCardText:v["b"],VCardTitle:v["c"],VChip:f["a"],VCol:y["a"],VContainer:x["a"],VDataTable:b["a"],VDialog:_["a"],VForm:g["a"],VIcon:C["a"],VRow:E["a"],VSelect:k["a"],VSpacer:w["a"],VTextField:F["a"]})}}]);
//# sourceMappingURL=chunk-2d0c9709.aa32eddb.js.map