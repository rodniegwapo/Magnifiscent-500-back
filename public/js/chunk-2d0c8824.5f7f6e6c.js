(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c8824"],{"54d3":function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"pa-6"},[t("v-data-table",{staticClass:"elevation-1 overflow-hidden",attrs:{loading:e.loading,headers:e.headers,items:e.packageCodes.data,options:e.pagination,"footer-props":{itemsPerPageOptions:e.itemsPerPageOptions},"server-items-length":e.packageCodes.meta?e.packageCodes.meta.total:0,dark:""},on:{"update:options":function(a){e.pagination=a}},scopedSlots:e._u([{key:"top",fn:function(){return[t("v-container",{staticClass:"grey darken-4 elevation-1 pt-6 px-7",staticStyle:{"max-width":"100%!important"}},[t("v-row",[t("v-col",{staticClass:"primary--text headline",attrs:{cols:"12",md:"9",sm:"12"}},[t("v-btn",{staticClass:"mr-3 elevation-0",attrs:{"x-small":"",fab:"",color:"primary"},on:{click:function(a){return e.reloadPackageCodes()}}},[t("v-icon",{staticClass:"black--text",attrs:{small:""}},[e._v("fas fa-redo-alt")])],1),t("small",[e._v("Package Code Management")])],1),t("v-col",{staticClass:"pa-2",attrs:{cols:"12",md:"3",sm:"12"}},[t("v-btn",{staticClass:"elevation-1 black--text",attrs:{loading:e.exporting,disabled:e.exporting,color:"primary",block:""},on:{click:e.exportPackageCodes}},[t("v-icon",{staticClass:"mr-2",attrs:{small:""}},[e._v("fas fa-file-export")]),e._v(" Export ")],1)],1),t("v-col",{attrs:{cols:"12"}},[t("v-row",[t("v-col",{staticClass:"py-2",attrs:{cols:"12",md:"3",sm:"12"}},[t("v-autocomplete",{attrs:{items:e.sellers,"search-input":e.searchSellerValue,loading:e.searchingSeller,"persistent-hint":"","item-text":"full_name","item-value":"id","cache-items":"",label:"Seller",clearable:"","prepend-inner-icon":"fas fa-user",dense:"",outlined:"",dark:""},on:{"update:searchInput":function(a){e.searchSellerValue=a},"update:search-input":function(a){e.searchSellerValue=a}},model:{value:e.sellerId,callback:function(a){e.sellerId=a},expression:"sellerId"}})],1),t("v-col",{staticClass:"py-2",attrs:{cols:"12",md:"3",sm:"12"}},[t("v-autocomplete",{attrs:{items:e.users,"search-input":e.searchUserValue,loading:e.searchingUser,"item-text":"full_name","item-value":"id","cache-items":"",label:"Claimed By",clearable:"","prepend-inner-icon":"fas fa-user",dense:"",outlined:"",dark:""},on:{"update:searchInput":function(a){e.searchUserValue=a},"update:search-input":function(a){e.searchUserValue=a}},model:{value:e.userId,callback:function(a){e.userId=a},expression:"userId"}})],1),t("v-col",{staticClass:"py-2",attrs:{cols:"12",md:"3",sm:"12"}},[t("v-select",{attrs:{disabled:e.loading,"prepend-inner-icon":"fas fa-cubes",items:[{text:"Available",value:0},{text:"Claimed",value:1}],label:"Status",clearable:"",dense:"",dark:"",outlined:""},model:{value:e.status,callback:function(a){e.status=a},expression:"status"}})],1),t("v-col",{staticClass:"pa-2",attrs:{cols:"12",md:"3",sm:"12"}},[t("v-btn",{staticClass:"elevation-1 black--text",attrs:{color:"primary",block:""},on:{click:function(a){e.addPackageCodesDialog=!0,e.searchSellerValue=null}}},[t("v-icon",{staticClass:"mr-2",attrs:{small:""}},[e._v("fas fa-plus")]),e._v(" Add Package Code(s) ")],1)],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.claimed_at",fn:function(a){var t=a.item;return[e._v(" "+e._s(t.claimed_at?e.date(t.claimed_at,"MMMM D, YYYY - hh:mm a"):"")+" ")]}},{key:"item.status",fn:function(a){var s=a.item;return[t("v-chip",{staticClass:"text-capitalize",attrs:{dark:"",color:s.claimed?"red":"green"}},[e._v(e._s(s.claimed?"Claimed":"Available"))])]}},{key:"item.actions",fn:function(a){var s=a.item;return[t("div",{staticClass:"justify-center layout"},[t("v-tooltip",{attrs:{value:e.showCodeTooltip===s.id,top:""},scopedSlots:e._u([{key:"activator",fn:function(a){var r=a.attrs;return[t("v-btn",e._b({staticClass:"elevation-0 ml-3 rounded-pill black--text",attrs:{color:"primary",small:""},on:{click:function(a){return e.copyCode(s.code,s.id)}}},"v-btn",r,!1),[e._v(" Copy ")])]}}],null,!0)},[t("span",[e._v("Code Copied !")])])],1)]}}])}),t("v-dialog",{attrs:{persistent:"","max-width":"500px","overlay-opacity":"0.6","overlay-color":"grey"},model:{value:e.addPackageCodesDialog,callback:function(a){e.addPackageCodesDialog=a},expression:"addPackageCodesDialog"}},[t("v-form",{ref:"addPackageCodesForm",attrs:{lazy:""},on:{submit:function(a){return a.preventDefault(),e.addPackageCodes(a)}}},[t("v-card",{attrs:{dark:""}},[t("v-card-title",{staticClass:"pb-8"},[t("v-icon",{staticClass:"mr-2",attrs:{color:"primary"}},[e._v("fas fa-cubes")]),t("span",{staticClass:"headline primary--text"},[t("small",[e._v("Add Package Code(s)")])]),t("v-spacer"),t("v-btn",{attrs:{disabled:e.submitting,fab:"",text:"",small:"",color:"primary"},on:{click:function(a){e.$refs.addPackageCodesForm.reset(),e.addPackageCodesDialog=!1,e.searchSellerValue2=null}}},[t("v-icon",[e._v("fas fa-times")])],1)],1),t("v-card-text",[t("v-row",[t("v-col",{attrs:{cols:"12"}},[t("v-autocomplete",{attrs:{items:e.sellers,"search-input":e.searchSellerValue2,loading:e.searchingSeller2,"persistent-hint":"","cache-items":"","item-text":"full_name","item-value":"id",rules:[function(e){return!!e||"Seller is required."}],label:"Seller",clearable:"","prepend-inner-icon":"fas fa-user",dense:"",outlined:"",dark:""},on:{"update:searchInput":function(a){e.searchSellerValue2=a},"update:search-input":function(a){e.searchSellerValue2=a}},model:{value:e.addPackageCodesForm.seller_id,callback:function(a){e.$set(e.addPackageCodesForm,"seller_id",a)},expression:"addPackageCodesForm.seller_id"}})],1),t("v-col",{attrs:{cols:"12"}},[t("v-text-field",{staticClass:"required",attrs:{rules:[function(e){return!!e||"Number of codes is required."},function(e){return e<=1e4||"Maximum package codes to be created is 10000."}],label:"Number of Codes","prepend-inner-icon":"fas fa-cubes",outlined:"",flat:"",dense:"",type:"number"},model:{value:e.addPackageCodesForm.no_of_codes,callback:function(a){e.$set(e.addPackageCodesForm,"no_of_codes",e._n(a))},expression:"addPackageCodesForm.no_of_codes"}})],1)],1)],1),t("v-card-actions",{staticClass:"pt-0"},[t("v-spacer"),t("v-btn",{attrs:{color:"primary",text:"",disabled:e.submitting},on:{click:function(a){e.$refs.addPackageCodesForm.reset(),e.addPackageCodesDialog=!1,e.searchSellerValue2=null}}},[t("b",[e._v("Close")])]),t("v-btn",{attrs:{color:"primary",text:"",loading:e.submitting,disabled:e.submitting,type:"submit"}},[t("b",[e._v("Save")])])],1)],1)],1)],1),t("div",{attrs:{id:"copy-code"}})],1)},r=[],n=t("5530"),o=(t("96cf"),t("1da1")),c=t("2f62"),l=t("2ef0"),i=t.n(l),d={data:function(){return{loading:!1,status:0,code:"",sellerId:null,searchingSeller:!1,searchSellerValue:null,searchingSeller2:!1,searchSellerValue2:null,userId:null,searchingUser:!1,searchUserValue:null,search:null,showCodeTooltip:null,packageCodes:{},addPackageCodesForm:{},sellers:[],users:[],exporting:!1,addPackageCodesDialog:!1,submitting:!1,disablePagination:!1,pagination:{page:1,itemsPerPage:10},headers:[{text:"Code",align:"start",sortable:!0,value:"code"},{text:"Date Claimed",align:"start",sortable:!0,value:"claimed_at"},{text:"Status",align:"start",sortable:!1,value:"status"},{text:"Actions",align:"center",sortable:!1,value:"actions"}]}},mounted:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.searchSeller();case 2:return a.next=4,e.searchUser();case 4:e.getPackageCodes();case 5:case"end":return a.stop()}}),a)})))()},computed:Object(n["a"])({},Object(c["b"])({itemsPerPageOptions:"itemsPerPageOptions"})),watch:{searchSellerValue:i.a.debounce((function(){this.searchSeller()}),500),searchSellerValue2:i.a.debounce((function(){this.searchSeller2()}),500),searchUserValue:i.a.debounce((function(){this.searchUser()}),500),sellerId:function(){this.reloadPackageCodes()},userId:function(){this.reloadPackageCodes()},status:function(){this.reloadPackageCodes()},search:i.a.debounce((function(){this.reloadPackageCodes()}),500),pagination:{handler:function(){this.disablePagination||this.getPackageCodes()},deep:!0}},methods:{copyCode:function(e,a){var t=this,s=document.createElement("input");s.value=e,document.getElementById("copy-code").appendChild(s),s.select(),document.execCommand("Copy"),document.getElementById("copy-code").removeChild(s),this.showCodeTooltip=a,setTimeout((function(){t.showCodeTooltip=null}),1e3)},exportPackageCodes:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var t,s,r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.exporting=!0,t=e.pagination,s={claimed:e.status,seller_id:e.sellerId,user_id:e.userId},t.sortBy&&t.sortBy.length>0&&(e.$set(s,"order_by",t.sortBy[0]),e.$set(s,"order_desc",t.sortDesc[0]?1:0)),a.next=7,e.$axios.post("/admin/encryption/package-codes",s);case 7:r=a.sent,n="https://app.magnifiscent500-premium.com/export/package-codes/"+r.data.data,window.open(n),a.next=15;break;case 12:a.prev=12,a.t0=a["catch"](0),e.showSnackbar("error",a.t0.response?a.t0.response.data.message:a.t0.message);case 15:return a.prev=15,e.exporting=!1,a.finish(15);case 18:case"end":return a.stop()}}),a,null,[[0,12,15,18]])})))()},reloadPackageCodes:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.disablePagination=!0,e.pagination.page=1,a.next=4,e.getPackageCodes();case 4:e.disablePagination=!1;case 5:case"end":return a.stop()}}),a)})))()},searchSeller:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var t;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.searchingSeller=!0,a.next=4,e.$axios.get("/admin/users",{params:{search:e.searchSellerValue,page:1,limit:10,role_slug:"seller"}});case 4:t=a.sent,e.sellers=t.data.data,a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),e.showSnackbar("error",a.t0.response?a.t0.response.data.message:a.t0.message);case 11:return a.prev=11,e.searchingSeller=!1,a.finish(11);case 14:case"end":return a.stop()}}),a,null,[[0,8,11,14]])})))()},searchSeller2:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var t;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.searchingSeller2=!0,a.next=4,e.$axios.get("/admin/users",{params:{search:e.searchSellerValue2,page:1,limit:10,role_slug:"seller"}});case 4:t=a.sent,e.sellers=t.data.data,a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),e.showSnackbar("error",a.t0.response?a.t0.response.data.message:a.t0.message);case 11:return a.prev=11,e.searchingSeller2=!1,a.finish(11);case 14:case"end":return a.stop()}}),a,null,[[0,8,11,14]])})))()},searchUser:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var t;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.searchingUser=!0,a.next=4,e.$axios.get("/admin/users",{params:{search:e.searchUserValue,page:1,limit:10,role_slug:"user"}});case 4:t=a.sent,e.users=t.data.data,a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),e.showSnackbar("error",a.t0.response?a.t0.response.data.message:a.t0.message);case 11:return a.prev=11,e.searchingUser=!1,a.finish(11);case 14:case"end":return a.stop()}}),a,null,[[0,8,11,14]])})))()},getPackageCodes:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var t,s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.loading=!0,t=e.pagination,s={page:t.page,limit:t.itemsPerPage,claimed:e.status,seller_id:e.sellerId,user_id:e.userId},t.sortBy&&t.sortBy.length>0&&(e.$set(s,"order_by",t.sortBy[0]),e.$set(s,"order_desc",t.sortDesc[0]?1:0)),a.next=7,e.$axios.get("/admin/package-codes",{params:s});case 7:r=a.sent,e.packageCodes=r.data,a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](0),e.showSnackbar("error",a.t0.response?a.t0.response.data.message:a.t0.message);case 14:return a.prev=14,e.loading=!1,a.finish(14);case 17:case"end":return a.stop()}}),a,null,[[0,11,14,17]])})))()},addPackageCodes:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e.$refs.addPackageCodesForm.validate()){a.next=17;break}return a.prev=1,e.submitting=!0,a.next=5,e.$axios.post("/admin/package-codes",e.addPackageCodesForm);case 5:e.getPackageCodes(),e.showSnackbar("success",e.addPackageCodesForm.no_of_codes+" package codes created successfully."),e.$refs.addPackageCodesForm.reset(),e.addPackageCodesDialog=!1,a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](1),e.showSnackbar("error",a.t0.response?a.t0.response.data.message:a.t0.message);case 14:return a.prev=14,e.submitting=!1,a.finish(14);case 17:case"end":return a.stop()}}),a,null,[[1,11,14,17]])})))()}}},u=d,p=t("2877"),m=t("6544"),g=t.n(m),h=t("c6a6"),v=t("8336"),f=t("b0af"),k=t("99d9"),b=t("cc20"),C=t("62ad"),x=t("a523"),P=t("8fea"),_=t("169a"),w=t("4bd4"),y=t("132d"),S=t("0fd9"),V=t("b974"),I=t("2fa4"),R=t("8654"),$=t("3a2f"),F=Object(p["a"])(u,s,r,!1,null,null,null);a["default"]=F.exports;g()(F,{VAutocomplete:h["a"],VBtn:v["a"],VCard:f["a"],VCardActions:k["a"],VCardText:k["b"],VCardTitle:k["c"],VChip:b["a"],VCol:C["a"],VContainer:x["a"],VDataTable:P["a"],VDialog:_["a"],VForm:w["a"],VIcon:y["a"],VRow:S["a"],VSelect:V["a"],VSpacer:I["a"],VTextField:R["a"],VTooltip:$["a"]})}}]);
//# sourceMappingURL=chunk-2d0c8824.5f7f6e6c.js.map